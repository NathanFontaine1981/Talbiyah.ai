<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Talbiyah Insights Preview - An-Nazi'at (79:15-26)</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50">
    <!-- Header -->
    <header class="bg-white border-b border-emerald-100 shadow-sm">
        <div class="max-w-5xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-gray-900">Lesson Insights Preview</h1>
                <button onclick="window.print()" class="px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700">
                    Print / Save PDF
                </button>
            </div>
        </div>
    </header>

    <!-- Content -->
    <main class="max-w-4xl mx-auto px-6 py-8">
        <!-- Title Card -->
        <div class="bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl p-8 mb-8 text-white shadow-xl">
            <div class="flex items-center space-x-3 mb-4">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                </svg>
                <h1 class="text-3xl font-bold">Talbiyah Insights - Qur'an with Tadabbur</h1>
            </div>
            <h2 class="text-2xl font-semibold mb-2">An-Nazi'at (The Extractors) (79)</h2>
            <p class="text-emerald-100 text-lg">79:15-26</p>
            <div class="mt-4 flex flex-wrap gap-4 text-sm text-emerald-100">
                <span>üë®‚Äçüè´ Teacher: Ustadh Osama Muhammad</span>
                <span>üìÖ November 9, 2025</span>
                <span>‚è±Ô∏è 60 minutes</span>
            </div>
        </div>

        <!-- Insights Content - Collapsible Style -->
        <div class="space-y-3 mb-8">
            <!-- Flow of Meaning Section -->
            <details class="group bg-white border border-teal-200 rounded-lg overflow-hidden" open>
                <summary class="flex items-center justify-between px-4 py-3 bg-teal-50 cursor-pointer hover:bg-teal-100 transition">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" class="w-4 h-4 text-teal-600 rounded pointer-events-none" checked disabled>
                        <span class="font-medium text-teal-900">Flow of Meaning (Tafsƒ´r Summary)</span>
                    </div>
                    <svg class="w-5 h-5 text-teal-600 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="px-4 pb-4 bg-white">
                    <div class="prose prose-sm max-w-none text-gray-700 leading-relaxed">
                        <p>This section of Surah An-Nazi'at focuses on the story of Musa (peace be upon him) and his encounter with the tyrannical Pharaoh. Allah asks if the story of Musa has reached the listener, recounting how Allah called Musa in the sacred valley of Tuwa and commanded him to go to Pharaoh, who had transgressed all bounds.</p>
                        <p>Musa was instructed to invite Pharaoh to purify himself and be guided to his Lord, so that he may fear Allah. Musa then showed Pharaoh the greatest sign, but Pharaoh denied it and disobeyed. He turned his back and gathered his people, arrogantly declaring himself to be the supreme lord.</p>
                        <p>However, Allah seized Pharaoh with exemplary punishment, both in this life and the Hereafter, as a lesson and warning for those who would defy Allah. The passage then transitions to rhetorical questions about the creation of the heavens, highlighting Allah's power and the ease with which He can resurrect the dead, compared to the vastness of the universe He has created.</p>
                    </div>
                </div>
            </details>

            <!-- Vocabulary Section -->
            <details class="group bg-white border border-emerald-200 rounded-lg overflow-hidden">
                <summary class="flex items-center justify-between px-4 py-3 bg-emerald-50 cursor-pointer hover:bg-emerald-100 transition">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" class="w-4 h-4 text-emerald-600 rounded pointer-events-none">
                        <span class="font-medium text-emerald-900">Key Arabic Vocabulary</span>
                    </div>
                    <svg class="w-5 h-5 text-emerald-600 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="px-4 pb-4 bg-white">
                    <div class="prose prose-sm max-w-none text-gray-700 leading-relaxed">
                        <ul>
                            <li><strong>ŸÜŸéŸÉŸéÿßŸÑ (nakaal)</strong> - Exemplary punishment, a deterrent</li>
                            <li><strong>ÿ£Ÿéÿ∫Ÿíÿ∑Ÿéÿ¥Ÿé (aghtasha)</strong> - He made dark, He covered with darkness</li>
                            <li><strong>ÿØŸèÿ≠ŸéÿßŸáŸéÿß (duhaha)</strong> - Its brightness, its daytime</li>
                        </ul>
                    </div>
                </div>
            </details>

            <!-- Tadabbur Section -->
            <details class="group bg-white border border-amber-200 rounded-lg overflow-hidden">
                <summary class="flex items-center justify-between px-4 py-3 bg-amber-50 cursor-pointer hover:bg-amber-100 transition">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" class="w-4 h-4 text-amber-600 rounded pointer-events-none">
                        <span class="font-medium text-amber-900">Key Lessons & Tadabbur Points</span>
                    </div>
                    <svg class="w-5 h-5 text-amber-600 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="px-4 pb-4 bg-white">
                    <div class="prose prose-sm max-w-none text-gray-700 leading-relaxed">
                        <ol>
                            <li><strong>Arrogance and rejection of truth</strong> leads to severe consequences from Allah.</li>
                            <li><strong>Allah's power is immense</strong> - He created the vast heavens with ease, so resurrection is simple for Him.</li>
                            <li><strong>Purification of the soul</strong> and guidance to Allah should be the ultimate goal, not worldly power and pride.</li>
                            <li><strong>The stories of the Prophets</strong> are a lesson and warning for all who would fear Allah.</li>
                            <li><strong>Proper recitation and contemplation</strong> of the Qur'an strengthens one's faith and relationship with Allah.</li>
                        </ol>
                    </div>
                </div>
            </details>

            <!-- Reflection Questions -->
            <details class="group bg-white border border-rose-200 rounded-lg overflow-hidden">
                <summary class="flex items-center justify-between px-4 py-3 bg-rose-50 cursor-pointer hover:bg-rose-100 transition">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" class="w-4 h-4 text-rose-600 rounded pointer-events-none">
                        <span class="font-medium text-rose-900">Reflection Questions</span>
                    </div>
                    <svg class="w-5 h-5 text-rose-600 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="px-4 pb-4 bg-white">
                    <div class="prose prose-sm max-w-none text-gray-700 leading-relaxed">
                        <ol>
                            <li>How can we guard against the temptation of <strong>arrogance and self-aggrandizement</strong> like Pharaoh?</li>
                            <li>What steps can we take to <strong>purify our souls</strong> and seek Allah's guidance in our lives?</li>
                            <li>What lessons can we learn from the <strong>story of Musa and Pharaoh</strong> to strengthen our own faith and submission to Allah?</li>
                        </ol>
                    </div>
                </div>
            </details>

            <!-- Mini Quiz Section -->
            <details class="group bg-white border border-indigo-200 rounded-lg overflow-hidden">
                <summary class="flex items-center justify-between px-4 py-3 bg-indigo-50 cursor-pointer hover:bg-indigo-100 transition">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" class="w-4 h-4 text-indigo-600 rounded pointer-events-none" checked disabled>
                        <span class="font-medium text-indigo-900">Mini Quiz (Comprehension Check)</span>
                    </div>
                    <svg class="w-5 h-5 text-indigo-600 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="px-4 pb-4 space-y-6 bg-white" id="quiz-container-collapsible"></div>
            </details>

            <!-- Homework Section -->
            <details class="group bg-white border border-green-200 rounded-lg overflow-hidden">
                <summary class="flex items-center justify-between px-4 py-3 bg-green-50 cursor-pointer hover:bg-green-100 transition">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" class="w-4 h-4 text-green-600 rounded pointer-events-none">
                        <span class="font-medium text-green-900">Homework & Practice Tasks</span>
                    </div>
                    <svg class="w-5 h-5 text-green-600 group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </summary>
                <div class="px-4 pb-4 bg-white">
                    <div class="prose prose-sm max-w-none text-gray-700 leading-relaxed">
                        <ol>
                            <li><strong>Memorize</strong> verses 79:15-26 firmly, especially the story of Musa and Pharaoh.</li>
                            <li><strong>Reflect</strong> on the meaning of Pharaoh's arrogance and Allah's punishment of him.</li>
                            <li><strong>Practice</strong> the pronunciation of "wa aghtasha laylaha" until it flows smoothly.</li>
                            <li><strong>Contemplate</strong> the rhetorical question about the creation of the heavens and how it relates to belief in resurrection.</li>
                        </ol>
                    </div>
                </div>
            </details>
        </div>

        <!-- Footer -->
        <div class="text-center text-sm text-slate-500">
            <p>Generated by Talbiyah.ai ‚Ä¢ Islamic Learning Platform</p>
        </div>
    </main>

    <style>
        @media print {
            body {
                background: white !important;
            }
            header button {
                display: none !important;
            }
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>

    <script>
        const questions = [
            {
                question: "Where did Allah call Musa (peace be upon him)?",
                options: [
                    "Mount Uhud",
                    "Madƒ´nah",
                    "Sacred Valley of ·π¨uwƒÅ",
                    "Mount Sinai"
                ],
                correctAnswer: 2
            },
            {
                question: "What did Pharaoh claim about himself?",
                options: [
                    "I am your guide",
                    "I am your provider",
                    "I am your lord, most high",
                    "I am your messenger"
                ],
                correctAnswer: 2
            },
            {
                question: "What did Allah do to Pharaoh as an example and warning?",
                options: [
                    "Forgave him",
                    "Guided him to the truth",
                    "Sent him wealth and prosperity",
                    "Seized him with exemplary punishment"
                ],
                correctAnswer: 3
            }
        ];

        const quizContainer = document.getElementById('quiz-container-collapsible');

        questions.forEach((q, qIndex) => {
            const questionDiv = document.createElement('div');
            questionDiv.className = 'space-y-3';
            questionDiv.id = `question-${qIndex}`;

            // Question text
            const questionText = document.createElement('p');
            questionText.className = 'font-semibold text-gray-900';
            questionText.innerHTML = `<strong>Q${qIndex + 1}.</strong> ${q.question}`;
            questionDiv.appendChild(questionText);

            // Options container
            const optionsDiv = document.createElement('div');
            optionsDiv.className = 'space-y-2';

            q.options.forEach((option, oIndex) => {
                const optionButton = document.createElement('button');
                optionButton.className = 'w-full text-left px-4 py-3 rounded-lg border-2 transition-all border-gray-200 bg-white hover:border-emerald-300 hover:bg-emerald-50 cursor-pointer';
                optionButton.id = `q${qIndex}-option-${oIndex}`;

                const optionContent = document.createElement('div');
                optionContent.className = 'flex items-center justify-between';

                const optionText = document.createElement('span');
                optionText.className = 'text-sm';
                optionText.textContent = `${String.fromCharCode(65 + oIndex)}) ${option}`;

                optionContent.appendChild(optionText);
                optionButton.appendChild(optionContent);
                optionsDiv.appendChild(optionButton);

                // Click handler
                optionButton.addEventListener('click', () => {
                    handleAnswer(qIndex, oIndex, q.correctAnswer, questionDiv);
                });
            });

            questionDiv.appendChild(optionsDiv);
            quizContainer.appendChild(questionDiv);
        });

        function handleAnswer(qIndex, selectedIndex, correctIndex, questionDiv) {
            const options = questionDiv.querySelectorAll('button');

            // Disable all buttons
            options.forEach((btn, idx) => {
                btn.disabled = true;
                btn.classList.remove('cursor-pointer', 'hover:border-emerald-300', 'hover:bg-emerald-50');
                btn.classList.add('cursor-not-allowed');

                const optionContent = btn.querySelector('div');
                const isSelected = idx === selectedIndex;
                const isCorrect = idx === correctIndex;

                // Remove existing border colors
                btn.classList.remove('border-gray-200', 'bg-white');

                if (isSelected) {
                    if (isCorrect) {
                        // Selected and correct
                        btn.classList.add('border-emerald-500', 'bg-emerald-50', 'text-emerald-900');
                        const checkIcon = document.createElement('span');
                        checkIcon.innerHTML = `
                            <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        `;
                        optionContent.appendChild(checkIcon);
                    } else {
                        // Selected but incorrect
                        btn.classList.add('border-red-500', 'bg-red-50', 'text-red-900');
                        const xIcon = document.createElement('span');
                        xIcon.innerHTML = `
                            <svg class="w-5 h-5 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        `;
                        optionContent.appendChild(xIcon);
                    }
                } else if (isCorrect) {
                    // Show correct answer
                    btn.classList.add('border-emerald-500', 'bg-emerald-50', 'text-emerald-900');
                    const checkIcon = document.createElement('span');
                    checkIcon.innerHTML = `
                        <svg class="w-5 h-5 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    `;
                    optionContent.appendChild(checkIcon);
                } else {
                    // Other options
                    btn.classList.add('border-gray-200', 'bg-gray-50', 'text-gray-500');
                }
            });

            // Add feedback message
            const isCorrect = selectedIndex === correctIndex;
            const feedbackDiv = document.createElement('div');
            feedbackDiv.className = 'flex items-center justify-between pt-2';
            feedbackDiv.innerHTML = `
                <p class="text-sm font-medium ${isCorrect ? 'text-emerald-600' : 'text-red-600'}">
                    ${isCorrect ? '‚úì Correct!' : '‚úó Incorrect - see the correct answer above'}
                </p>
                <button onclick="resetQuestion(${qIndex})" class="text-sm text-emerald-600 hover:text-emerald-700 font-medium">
                    Try again
                </button>
            `;
            questionDiv.appendChild(feedbackDiv);
        }

        function resetQuestion(qIndex) {
            const questionDiv = document.getElementById(`question-${qIndex}`);
            const options = questionDiv.querySelectorAll('button');

            // Remove feedback
            const feedback = questionDiv.querySelector('.flex.items-center.justify-between');
            if (feedback) feedback.remove();

            // Reset all buttons
            options.forEach((btn) => {
                btn.disabled = false;
                btn.className = 'w-full text-left px-4 py-3 rounded-lg border-2 transition-all border-gray-200 bg-white hover:border-emerald-300 hover:bg-emerald-50 cursor-pointer';

                const optionContent = btn.querySelector('div');
                // Remove any icons
                const icons = optionContent.querySelectorAll('svg');
                icons.forEach(icon => icon.parentElement.remove());
            });
        }

        // Make resetQuestion available globally
        window.resetQuestion = resetQuestion;
    </script>
</body>
</html>
